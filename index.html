<!DOCTYPE html>
<html lang="si">
<head>
<meta charset="UTF-8">
<title>DTZ YT Downloader</title>
<link href="https://fonts.googleapis.com/css2?family=Poppins&display=swap" rel="stylesheet">
<style>
  /* Global Styles */
  * { margin:0; padding:0; box-sizing:border-box; font-family:'Poppins', Arial, sans-serif; }
  body { background:#050505; min-height:100vh; display:flex; justify-content:center; align-items:center; color:#e5e7eb; position:relative;  }
  
  /* Bubble Background */
  .bubble { position:absolute; bottom:0; border-radius:50%; background:#ff0000; opacity:0.6; animation:floatUp linear forwards; }
  @keyframes floatUp { 0% { transform: translateY(0) scale(0.5); opacity:0.3; } 50% { opacity:0.8; } 100% { transform: translateY(-150vh) scale(1); opacity:0; } }
  
  /* Notice Bar */
  #notice { position:fixed; top:0; left:0; width:100%; background:#1a0000; padding:12px; text-align:center; z-index:1000; color:#ffaaaa; font-weight:bold; }
  #notice::before, #notice::after { content:""; position:absolute; inset:-3px; border-radius:8px; background:conic-gradient(from var(--angle), #ff0000, #000, #ff0000); z-index:-1; animation:spin 4s linear infinite; }
  #notice::before { filter:blur(1rem); opacity:0.7; }
  @keyframes spin { to { --angle:360deg; } }
  @property --angle { syntax:"<angle>"; initial-value:0deg; inherits:false; }

  /* Loading Overlay */
  #loadingOverlay { position:fixed; top:0; left:0; width:100%; height:100%; background:rgba(0,0,0,0.9); display:none; justify-content:center; align-items:center; flex-direction:column; z-index:999; }
  .spinner { width:60px; height:60px; border:6px solid #333; border-top:6px solid #ff0000; border-radius:50%; animation:spinLoader 1s linear infinite; margin-bottom:20px; }
  @keyframes spinLoader { to { transform:rotate(360deg); } }

  /* Language Popup */
  #langPopup { position:fixed; top:0; left:0; width:100%; height:100%; background:rgba(0,0,0,0.95); display:flex; justify-content:center; align-items:center; z-index:1001; flex-direction:column; }
  #langPopup button { padding:15px 30px; margin:10px; background:#ff0000; color:#fff; border:none; border-radius:12px; font-size:18px; cursor:pointer; box-shadow:0 0 15px #ff0000; }

  /* Container & Rest */
  .container { max-width:700px; width:100%; padding:20px; text-align:center; position:relative; z-index:1; margin-top:60px; }
  h1 { color:#ff2222; margin-bottom:20px; }
  .box { width:340px; margin:20px auto; padding:26px; background:#0b0b0b; border-radius:18px; position:relative; overflow:hidden; }
  .box::before, .box::after { content:""; position:absolute; inset:-3px; border-radius:20px; background:conic-gradient(from var(--angle), #ff0000, #000, #ff0000); z-index:-1; animation:spin 3.5s linear infinite; }
  .box::before { filter:blur(1.4rem); opacity:.75; }
  input { width:100%; padding:12px; border-radius:6px; border:none; margin-bottom:12px; font-size:16px; }
  button { padding:12px 20px; background:#ff0000; border:none; border-radius:12px; font-weight:600; color:#fff; cursor:pointer; box-shadow:0 0 10px #ff0000; }
  button:hover { background:#000; color:#ff0000; box-shadow:0 0 20px #ff0000; }
  .download-btn { display:inline-block; padding:8px 14px; background:#ff0000; color:#fff; border-radius:6px; text-decoration:none; font-weight:bold; margin:5px; }
  .download-btn:hover { background:#000; color:#ff0000; box-shadow:0 0 15px #ff0000; }
  #thumbnail { display:none; max-width:480px; width:100%; height:auto; border-radius:12px; margin:20px auto; box-shadow:0 0 20px rgba(255,0,0,0.5); }
</style>
</head>
<body>

<!-- Notice Bar -->
<div id="notice" data-si="Download button ‡∂ë‡∂ö click ‡∂ö‡∑Ö‡∑è‡∂∏ ‡∂≠‡∑Ä page ‡∂ë‡∂ö‡∂ö‡∂ß redirect ‡∑Ä‡∑ô‡∂∫‡∑í. ‡∂ë‡∂≠‡∂± ... (dots three) menu ‡∂ë‡∂ö click ‡∂ö‡∂ª‡∂Ω‡∑è download ‡∂ö‡∂ª‡∂ú‡∂±‡∑ä‡∂±!" data-en="When you click the Download button, it redirects to another page. There, click the three dots menu to download!"></div>

<!-- Loading Overlay -->
<div id="loadingOverlay">
  <div class="spinner"></div>
  <p id="loadingText"></p>
</div>

<!-- Language Selection Popup -->
<div id="langPopup">
  <h2 style="color:#ff2222; margin-bottom:30px;">Select Language / ‡∂∑‡∑è‡∑Ç‡∑è‡∑Ä ‡∂≠‡∑ù‡∂ª‡∂±‡∑ä‡∂±</h2>
  <button onclick="setLanguage('si')">‡∑É‡∑í‡∂Ç‡∑Ñ‡∂Ω</button>
  <button onclick="setLanguage('en')">English</button>
</div>

<div class="container">
  <h1 id="heading">üé¨ DTZ YT DOWNLOADER</h1>

  <input id="yturl" type="text" placeholder="Paste YouTube link here / YouTube link ‡∂ë‡∂ö paste ‡∂ö‡∂ª‡∂±‡∑ä‡∂±">

  <button id="fetchBtn" onclick="fetchVideo()">Fetch Qualities / Qualities ‡∂ú‡∂±‡∑ä‡∂±</button>

  <h3 id="title"></h3>
  <img id="thumbnail" alt="Video Thumbnail">

  <div class="box">
    <h2 id="videoTitle">üìπ VIDEO</h2>
    <div id="videoList"></div>
  </div>

  <div class="box">
    <h2 id="audioTitle">üéµ AUDIO</h2>
    <div id="audioList"></div>
  </div>
</div>

<script>
// Bubble creation
function createBubble() {
  const bubble = document.createElement('div');
  bubble.classList.add('bubble');
  const size = Math.random() * 8 + 4;
  bubble.style.width = size + 'px';
  bubble.style.height = size + 'px';
  bubble.style.left = Math.random() * 100 + '%';
  bubble.style.animationDuration = (Math.random() * 2 + 2) + 's';
  document.body.appendChild(bubble);
  setTimeout(() => bubble.remove(), 4000);
}
setInterval(createBubble, 20);

// Language System
let currentLang = 'si';

const translations = {
  si: {
    heading: "üé¨ DTZ YT DOWNLOADER",
    placeholder: "YouTube link ‡∂ë‡∂ö paste ‡∂ö‡∂ª‡∂±‡∑ä‡∂±",
    fetchBtn: "Qualities ‡∂ú‡∂±‡∑ä‡∂±",
    videoTitle: "üìπ VIDEO",
    audioTitle: "üéµ AUDIO",
    loading: "Loading... / ‡∂Ω‡∑ù‡∂©‡∑ä ‡∑Ä‡∑ô‡∂∏‡∑í‡∂±‡∑ä...",
    noVideo: "Video formats ‡∂±‡∑ê‡∑Ñ‡∑ê",
    noAudio: "Audio formats ‡∂±‡∑ê‡∑Ñ‡∑ê",
    unknown: "Unknown Title / ‡∂±‡∑ú‡∂Ø‡∂±‡∑ä‡∂±‡∑è Title"
  },
  en: {
    heading: "üé¨ DTZ YT DOWNLOADER",
    placeholder: "Paste YouTube link here",
    fetchBtn: "Fetch Qualities",
    videoTitle: "üìπ VIDEO",
    audioTitle: "üéµ AUDIO",
    loading: "Loading...",
    noVideo: "No video formats available",
    noAudio: "No audio formats available",
    unknown: "Unknown Title"
  }
};

function setLanguage(lang) {
  currentLang = lang;
  document.getElementById('langPopup').style.display = 'none';
  document.documentElement.lang = lang;
  applyTranslations();
  updateNotice();
}

function applyTranslations() {
  const t = translations[currentLang];
  document.getElementById('heading').innerText = t.heading;
  document.getElementById('yturl').placeholder = t.placeholder;
  document.getElementById('fetchBtn').innerText = t.fetchBtn;
  document.getElementById('videoTitle').innerText = t.videoTitle;
  document.getElementById('audioTitle').innerText = t.audioTitle;
}

function updateNotice() {
  document.getElementById('notice').innerText = document.getElementById('notice').getAttribute(`data-${currentLang}`);
}

// Loading functions
function showLoading() {
  document.getElementById('loadingOverlay').style.display = 'flex';
  document.getElementById('loadingText').innerText = translations[currentLang].loading;
}
function hideLoading() {
  document.getElementById('loadingOverlay').style.display = 'none';
}

// Fetch Video
async function fetchVideo() {
  const yt = document.getElementById("yturl").value.trim();
  if (!yt) return alert(currentLang === 'si' ? "Link ‡∂ë‡∂ö paste ‡∂ö‡∂ª‡∂±‡∑ä‡∂±" : "Paste YouTube link");

  showLoading();
  document.getElementById("title").innerText = translations[currentLang].loading;
  document.getElementById("thumbnail").style.display = "none";
  document.getElementById("videoList").innerHTML = "";
  document.getElementById("audioList").innerHTML = "";

  const API = `https://api.bk9.dev/download/youtube?url=${encodeURIComponent(yt)}`;

  try {
    const res = await fetch(API);
    const json = await res.json();

    if (!json.status || !json.BK9) {
      document.getElementById("title").innerText = currentLang === 'si' ? "Data ‡∂ú‡∂±‡∑ä‡∂± ‡∂∂‡∑ê‡∂ª‡∑í‡∑Ä‡∑î‡∂´‡∑è" : "Failed to fetch data";
      hideLoading();
      return;
    }

    const data = json.BK9;
    const formats = data.formats || [];

    document.getElementById("title").innerText = data.title || translations[currentLang].unknown;

    // Thumbnail
    const thumbImg = document.getElementById("thumbnail");
    let thumbUrl = data.thumbnail || "";
    if (thumbUrl) {
      thumbUrl = thumbUrl.split("?")[0].replace("default.jpg", "hqdefault.jpg");
      thumbImg.src = thumbUrl;
      thumbImg.style.display = "block";
    }

    // Video formats
    const videos = formats.filter(f => f.type === "video");
    document.getElementById("videoList").innerHTML = videos.length
      ? videos.map(v => `<a class="download-btn" href="\( {v.url}" target="_blank"> \){v.quality || "Unknown"} ${v.fps ? `| ${v.fps}fps` : ""} ${v.bitrate ? `| ${v.bitrate}` : ""}</a>`).join("")
      : `<p>${translations[currentLang].noVideo}</p>`;

    // Audio formats
    const audios = formats.filter(f => f.type !== "video");
    document.getElementById("audioList").innerHTML = audios.length
      ? audios.map(a => `<a class="download-btn" href="${a.url}" target="_blank">Audio ${a.quality ? `| ${a.quality}` : ""} ${a.bitrate ? `| ${a.bitrate}` : ""}</a>`).join("")
      : `<p>${translations[currentLang].noAudio}</p>`;

  } catch (e) {
    document.getElementById("title").innerText = currentLang === 'si' ? "Error ‡∂ë‡∂ö‡∂ö‡∑ä ‡∂Ü‡∑Ä‡∑è" : "Error fetching data";
    console.error(e);
  }
  hideLoading();
}

// Optional: Download button click ‡∂ö‡∑Ö‡∑è‡∂∏ ad page ‡∂ë‡∂ö‡∂ö‡∂ß redirect ‡∂ö‡∂ª‡∂±‡∑ä‡∂± ‡∂ï‡∂± ‡∂±‡∂∏‡∑ä ‡∂∏‡∑ö code uncomment ‡∂ö‡∂ª‡∂±‡∑ä‡∂±
// document.querySelectorAll('.download-btn').forEach(btn => {
//   btn.addEventListener('click', (e) => {
//     e.preventDefault();
//     window.open('https://your-ad-page.com', '_blank'); // ad page URL ‡∂Ø‡∑è‡∂±‡∑ä‡∂±
//     setTimeout(() => window.location.href = btn.href, 5000); // 5 seconds ‡∂ë‡∂ö‡∑ô‡∂±‡∑ä original link ‡∂ë‡∂ö‡∂ß ‡∂∫‡∂∫‡∑í
//   });
// });
</script>
</body>
</html>
